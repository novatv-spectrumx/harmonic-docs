<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">Home | Harmonic Template and Widget JavaScript Library</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.png" style="width:34px;"></a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/harmonic-font-face.js~HarmonicFontFace.html">HarmonicFontFace</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/harmonic-socket.js~HarmonicSocket.html">HarmonicSocket</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/harmonic-template.js~HarmonicTemplate.html">HarmonicTemplate</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#hjs">hjs</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/hjs/hjs-test.js~HarmonicTemplateTest.html">HarmonicTemplateTest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/hjs/hjs.js~HJS.html">HJS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-dve">dve</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-dve0">dve0</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-dve1">dve1</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-harmonicDVE">harmonicDVE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-harmonicLiveAVO">harmonicLiveAVO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-harmonicTemplate">harmonicTemplate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-hjs">hjs</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-hjsConfig">hjsConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-liveAVO">liveAVO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-liveAVO0">liveAVO0</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-liveAVO1">liveAVO1</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-hjstest">hjstest</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#widgets">widgets</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widgets/harmonic-countdown.js~HarmonicCountdown.html">HarmonicCountdown</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widgets/harmonic-dve.js~HarmonicDVE.html">HarmonicDVE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widgets/harmonic-label-scroll.js~HarmonicLabelScroll.html">HarmonicLabelScroll</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widgets/harmonic-label.js~HarmonicLabel.html">HarmonicLabel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widgets/harmonic-live-avo.js~HarmonicLiveAVO.html">HarmonicLiveAVO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widgets/harmonic-movie-clip.js~HarmonicMovieClip.html">HarmonicMovieClip</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widgets/harmonic-text-field.js~HarmonicTextField.html">HarmonicTextField</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widgets/harmonic-text-scroll.js~HarmonicTextScroll.html">HarmonicTextScroll</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widgets/harmonic-video.js~HarmonicVideo.html">HarmonicVideo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widgets/harmonic-widget.js~HarmonicWidget.html">HarmonicWidget</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/widgets/harmonic-xmlhttprequest.js~HarmonicXMLHttpRequest.html">HarmonicXMLHttpRequest</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><div data-ice="index" class="github-markdown"><h1 id="harmonic-template-and-widget-javascript-library">Harmonic Template and Widget JavaScript Library</h1><p>This JavaScript library, provided by Harmonic, contains all of the code necessary to allow a HTML template to be used in the graphics processing and controlled by Oxtel.  The code is composed of the following main components:</p>
<ul>
<li>HJS - provides the interface to and from the HTML renderer</li>
<li>Harmonic Template - controls the main timeline and manages the widgets</li>
<li>Harmonic Widgets - provides common functionality used by many of the template</li>
<li>Harmonic FontFace - provides a mechanism for loading fonts from the webserver</li>
<li>Harmonic Socket - provides a mechanism to allow JavaScript to interact with sockets</li>
</ul>
<h2 id="hjs">HJS</h2><p>HJS (Harmonic JavaScript) provides the interface to the C++ HTML renderer.  It uses a WebSocket to communicate to the renderer.  The HTML renderer provides access to/from d-bus for template control as well as access to the shared surface.  HJS also provides a mechanism to log messages to the Monitor log.</p>
<p>The HJS contains a global object called &apos;hjstest&apos; that provides a valuable means to test template functionality in the desktop environment.  This object allows the user to inject commands into the template just as if it was received over the websocket from the HTML renderer.  This can be very useful when debugging run-time issues.</p>
<h2 id="harmonic-template">Harmonic Template</h2><p>The Harmonic Template is the main controller for HTML templates.  The Harmonic Template directs its animation controls at the Adobe exportRoot global object.  It also controls all createjs MovieClips on the display tree.</p>
<p>The Harmonic Template is responsible for receiving template control commands from HJS via the HJS.COMMAND_RECEIVED_EVENT.  It also manages widgets that are created during load time.  Commands that are received from HJS and targeted at a widget are sent directly to the widget with the WIDGET_EVENT.</p>
<h2 id="harmonic-widgets">Harmonic Widgets</h2><p>Harmonic Widgets make it easy for customers to integrate standard functionality into their templates.  The Harmonic Widgets can be included into their Adobe Animate CC project by importing the library from the Harmonic Template Widget Library.  The widgets in this library register themselves with the Harmonic Widget JavaScript code which provides the core functionality.  The Harmonic Widgets register themselves with the Harmonic Template by dispatching the WIDGET_CREATED_EVENT.  Once the Harmonic Template receives the event, it keeps track of the created widgets and sends the WIDGET_EVENT to the widget when the widget needs to take action.  </p>
<h2 id="harmonic-fontface">Harmonic FontFace</h2><p>The Harmonic FontFace is a thin wrapper around the CSS Font Loading API.  It is intended to make it easy for customers to include fonts that reside near the Harmonic Template on the webserver.</p>
<h2 id="harmonic-socket">Harmonic Socket</h2><p>The Harmonic Socket is a mechanism that allows JavaScript to connect to TCP or UDP sockets using the HTML renderer as a proxy.  Since browsers cannot open sockets directly due to security concerns, the HTML renderer will handle the socket connection and communication.</p>
<h1 id="design">Design</h1><p><img src="design.png" alt="Design"></p>
<h1 id="common-code-snippets">Common Code Snippets</h1><p>Below are a set of common code snippets.  These snippets can also be found throughout the documentation, but have been duplicated here for convenience.</p>
<h2 id="callbacks-on-harmonic-template-events">Callbacks on Harmonic Template Events</h2><pre><code class="lang-javascript"><code class="source-code prettyprint">document.addEventListener(HarmonicTemplate.LOAD_COMPLETE_EVENT, onLoadComplete.bind(this));
function onLoadComplete(obj) {
    hjs.info(&quot;LOAD_COMPLETE_EVENT received&quot;);
}

document.addEventListener(HarmonicTemplate.VISIBLE_EVENT, onVisible.bind(this));
function onVisible(obj) {
    hjs.info(&quot;VISIBLE_EVENT received&quot;);
}

document.addEventListener(HarmonicTemplate.FULLY_VISIBLE_EVENT, onFullyVisible.bind(this));
function onFullyVisible(obj) {
    hjs.info(&quot;FULLY_VISIBLE_EVENT received&quot;);
}</code>
</code></pre>
<h2 id="overriding-updatetextfield">Overriding updateTextField</h2><pre><code class="lang-javascript"><code class="source-code prettyprint">function updateTextFieldOverride(obj) {
    hjs.info(&quot;updateTextFieldOverride:&quot;);
    hjs.info(&quot;obj.tickid:   &quot; + obj.tickid);
    hjs.info(&quot;obj.fieldNum: &quot; + obj.fieldNum);
    hjs.info(&quot;obj.text:     &quot; + obj.text);
    hjs.info(&quot;obj.render:   &quot; + obj.render);
    switch (obj.fieldNum) {
        case 1:
            break;
    }

    // This is optional, but recommended.
    harmonicTemplate.updateTextField(obj);
}

// Create the override object and register it with the harmonicTemplate
let override = {
    updateTextField: updateTextFieldOverride     
}

harmonicTemplate.registerOverride(override);</code>
</code></pre>
<h2 id="loading-a-font">Loading a font</h2><pre><code class="lang-javascript"><code class="source-code prettyprint">let roboto = new HarmonicFontFace(&quot;Roboto Black&quot;, &quot;Roboto-Black.woff2&quot;);
roboto.load();</code>
</code></pre>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
